"""
–ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–º–∞–º–∏ –∫–≤–∏–∑–æ–≤.

–°–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–µ–º –¥–ª—è –∫–≤–∏–∑–æ–≤, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
–≤–æ–ø—Ä–æ—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é ChatGPT. –ö–∞–∂–¥–∞—è —Ç–µ–º–∞ –∏–º–µ–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ, —ç–º–æ–¥–∑–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
–ø—Ä–æ–º–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Ç–µ–º–∞—Ç–∏–∫–∏.
"""

import logging

from telegram import InlineKeyboardButton, InlineKeyboardMarkup

logger = logging.getLogger(__name__)

QUIZ_TOPICS = {
    "programming": {
        "name": "üíª –ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
        "emoji": "üíª",
        "prompt": """–¢—ã —Å–æ–∑–¥–∞–µ—à—å –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –∫–≤–∏–∑–∞ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é.
–°–æ–∑–¥–∞–π –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å —Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–∞ (A, B, C, D).
–£–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ –∫–æ–Ω—Ü–µ.
–§–æ—Ä–º–∞—Ç:
–í–æ–ø—Ä–æ—Å: [—Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å]
A) [–≤–∞—Ä–∏–∞–Ω—Ç 1]
B) [–≤–∞—Ä–∏–∞–Ω—Ç 2]
C) [–≤–∞—Ä–∏–∞–Ω—Ç 3]
D) [–≤–∞—Ä–∏–∞–Ω—Ç 4]
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: [–±—É–∫–≤–∞]"""
    },
    "history": {
        "name": "üèõÔ∏è –ò—Å—Ç–æ—Ä–∏—è",
        "emoji": "üèõÔ∏è",
        "prompt": """–¢—ã —Å–æ–∑–¥–∞–µ—à—å –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –∫–≤–∏–∑–∞ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏.
–°–æ–∑–¥–∞–π –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å —Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–∞ (A, B, C, D).
–£–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ –∫–æ–Ω—Ü–µ.
–§–æ—Ä–º–∞—Ç:
–í–æ–ø—Ä–æ—Å: [—Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å]
A) [–≤–∞—Ä–∏–∞–Ω—Ç 1]
B) [–≤–∞—Ä–∏–∞–Ω—Ç 2]
C) [–≤–∞—Ä–∏–∞–Ω—Ç 3]
D) [–≤–∞—Ä–∏–∞–Ω—Ç 4]
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: [–±—É–∫–≤–∞]"""
    },
    "science": {
        "name": "üî¨ –ù–∞—É–∫–∞",
        "emoji": "üî¨",
        "prompt": """–¢—ã —Å–æ–∑–¥–∞–µ—à—å –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –∫–≤–∏–∑–∞ –ø–æ –Ω–∞—É–∫–µ (—Ñ–∏–∑–∏–∫–∞, —Ö–∏–º–∏—è, –±–∏–æ–ª–æ–≥–∏—è).
–°–æ–∑–¥–∞–π –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –Ω–∞—É—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å —Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–∞ (A, B, C, D).
–£–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ –∫–æ–Ω—Ü–µ.
–§–æ—Ä–º–∞—Ç:
–í–æ–ø—Ä–æ—Å: [—Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å]
A) [–≤–∞—Ä–∏–∞–Ω—Ç 1]
B) [–≤–∞—Ä–∏–∞–Ω—Ç 2]
C) [–≤–∞—Ä–∏–∞–Ω—Ç 3]
D) [–≤–∞—Ä–∏–∞–Ω—Ç 4]
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: [–±—É–∫–≤–∞]"""
    },
    "geography": {
        "name": "üåç –ì–µ–æ–≥—Ä–∞—Ñ–∏—è",
        "emoji": "üåç",
        "prompt": """–¢—ã —Å–æ–∑–¥–∞–µ—à—å –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –∫–≤–∏–∑–∞ –ø–æ –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏.
–°–æ–∑–¥–∞–π –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å —Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–∞ (A, B, C, D).
–£–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ –∫–æ–Ω—Ü–µ.
–§–æ—Ä–º–∞—Ç:
–í–æ–ø—Ä–æ—Å: [—Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å]
A) [–≤–∞—Ä–∏–∞–Ω—Ç 1]
B) [–≤–∞—Ä–∏–∞–Ω—Ç 2]
C) [–≤–∞—Ä–∏–∞–Ω—Ç 3]
D) [–≤–∞—Ä–∏–∞–Ω—Ç 4]
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: [–±—É–∫–≤–∞]"""
    },
    "movies": {
        "name": "üé¨ –ö–∏–Ω–æ",
        "emoji": "üé¨",
        "prompt": """–¢—ã —Å–æ–∑–¥–∞–µ—à—å –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –∫–≤–∏–∑–∞ –æ –∫–∏–Ω–æ –∏ —Ñ–∏–ª—å–º–∞—Ö.
–°–æ–∑–¥–∞–π –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å –æ —Ñ–∏–ª—å–º–∞—Ö —Å—Ä–µ–¥–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–∞ (A, B, C, D).
–£–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ –∫–æ–Ω—Ü–µ.
–§–æ—Ä–º–∞—Ç:
–í–æ–ø—Ä–æ—Å: [—Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å]
A) [–≤–∞—Ä–∏–∞–Ω—Ç 1]
B) [–≤–∞—Ä–∏–∞–Ω—Ç 2]
C) [–≤–∞—Ä–∏–∞–Ω—Ç 3]
D) [–≤–∞—Ä–∏–∞–Ω—Ç 4]
–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: [–±—É–∫–≤–∞]"""
    }
}


def get_quiz_topics_keyboard():
    """
    –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —Ç–µ–º–∞–º–∏ –∫–≤–∏–∑–æ–≤.

    Returns:
        InlineKeyboardMarkup: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ —Ç–µ–º –∫–≤–∏–∑–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    """
    keyboard = []
    for topic_key, topic_data in QUIZ_TOPICS.items():
        keyboard.append([InlineKeyboardButton(topic_data["name"], callback_data=f"quiz_topic_{topic_key}")])

    keyboard.append([InlineKeyboardButton("üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", callback_data="quiz_finish")])
    return InlineKeyboardMarkup(keyboard)


def get_quiz_topic_data(topic_key):
    """
    –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–µ–º–µ –∫–≤–∏–∑–∞ –ø–æ –∫–ª—é—á—É.

    Args:
        topic_key (str): –ö–ª—é—á —Ç–µ–º—ã –∏–∑ —Å–ª–æ–≤–∞—Ä—è QUIZ_TOPICS

    Returns:
        dict: –î–∞–Ω–Ω—ã–µ –æ —Ç–µ–º–µ (name, emoji, prompt) –∏–ª–∏ None –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω
    """
    return QUIZ_TOPICS.get(topic_key)


def get_quiz_continue_keyboard(topic_key):
    """
    –°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∫–≤–∏–∑–∞ –ø–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å.

    Args:
        topic_key (str): –ö–ª—é—á —Ç–µ–∫—É—â–µ–π —Ç–µ–º—ã –∫–≤–∏–∑–∞

    Returns:
        InlineKeyboardMarkup: –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –æ–ø—Ü–∏—è–º–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –∫–≤–∏–∑–∞
    """
    logger.info(f"–¢–æ–ø–∏–∫ {topic_key}")
    keyboard = [
        [InlineKeyboardButton("üéØ –ï—â—ë –≤–æ–ø—Ä–æ—Å", callback_data=f"quiz_continue_{topic_key}")],
        [InlineKeyboardButton("üîÑ –°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É", callback_data="quiz_change_topic")],
        [InlineKeyboardButton("üèÅ –ó–∞–∫–æ–Ω—á–∏—Ç—å –∫–≤–∏–∑", callback_data="quiz_finish")]
    ]
    return InlineKeyboardMarkup(keyboard)
